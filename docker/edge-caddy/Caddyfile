# Caddyfile for automatic TLS termination on local development setup
# This would be just the domain part in production
# Using localhost for local development; in production, use your actual domain
http://localhost:8080 {
    # Enable automatic HTTPS with Let's Encrypt
    # For localhost, it will use a self-signed certificate

    # Set up logging
    log {
        output file /var/log/caddy/access.log
        format json
    }

    # Forward ALL traffic to nginx edge server
    reverse_proxy localhost:8081 {
        # Pass through real IP
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}
